<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blogs/styles.493e6315ef3a09bc2f74.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.22.15"/><style data-styled="jcTQYx cdEpUV jsMBhk iSYTTb gDybXa dIQAlg cMSLWU jaYKME iQIAOc dmFQlA hGedeg hzOKsN cpnbXC ipkTNK eNlzGc ukmsj iMnMOA cLxazo iJKMsj cBVFwB fDOfVi eAaXEV bGukrS" data-styled-version="4.4.1">
/* sc-component-id: sc-bdVaJa */
.cBVFwB{color:#3e465b;font-size:22px;font-weight:700;line-height:1.5;margin:25px 50px 15px;}
/* sc-component-id: sc-global-3434470545 */
@import url("https://fonts.googleapis.com/css?family=Roboto:400,700"); html{line-height:1.15;-webkit-text-size-adjust:100%;} body{margin:0;} main{display:block;} h1{font-size:2em;margin:0.67em 0;} hr{box-sizing:content-box;height:0;overflow:visible;} pre{font-family:monospace,monospace;font-size:1em;} a{background-color:transparent;} abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;} b,strong{font-weight:bolder;} code,kbd,samp{font-family:monospace,monospace;font-size:1em;} small{font-size:80%;} sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;} sub{bottom:-0.25em;} sup{top:-0.5em;} img{border-style:none;} button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;} button,input{overflow:visible;} button,select{text-transform:none;} button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;} button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;} button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;} fieldset{padding:0.35em 0.75em 0.625em;} legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;} progress{vertical-align:baseline;} textarea{overflow:auto;} [type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;} [type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;} [type="search"]{-webkit-appearance:textfield;outline-offset:-2px;} [type="search"]::-webkit-search-decoration{-webkit-appearance:none;} ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;} details{display:block;} summary{display:list-item;} template{display:none;} [hidden]{display:none;} *,*:before,*:after{box-sizing:inherit;} html{font-size:62.5%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;box-sizing:border-box;} body{background:#f9fafc;font-family:'Open Sans',sans-serif;line-height:1.5;padding:50px 0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;} img{max-width:100%;} .gatsby-highlight{border-bottom:1px solid #e0e6ed;border-top:1px solid #e0e6ed;margin:15px -100px;padding:0;} .gatsby-highlight pre[class*="language-"]{margin:0;padding:25px 100px;} pre[class*="language-"]{background:rgba(245,245,245,1);color:rgb(65,76,94);} @media only screen and (max-width:870px){.gatsby-highlight{margin:15px -15px;}.gatsby-highlight pre[class*="language-"]{padding:25px;}}
/* sc-component-id: sc-htpNat */
.jcTQYx{margin:0 auto;max-width:870px;}
/* sc-component-id: sc-bxivhb */
.jsMBhk{border:5px solid #3598db;border-radius:50%;height:150px;margin:0 auto 15px auto;overflow:hidden;width:150px;} .jsMBhk img{padding:5px;border-radius:50%;}
/* sc-component-id: sc-ifAKCX */
.cMSLWU{margin-top:15px;text-align:center;}
/* sc-component-id: sc-EHOje */
.jaYKME{border:1px solid #bfc8d2;border-radius:15px;color:#3e465b;display:inline-block;margin:5px;padding:5px 10px;-webkit-text-decoration:none;text-decoration:none;} .jaYKME svg{display:inline-block;height:20px;margin-right:5px;stroke:#6e849c;vertical-align:middle;width:20px;} .jaYKME:hover{border-color:#3e465b;}
/* sc-component-id: sc-bZQynM */
.iSYTTb{color:#3e465b;font-size:35px;line-height:1.5;margin:0;padding:0 30px;text-align:center;}
/* sc-component-id: sc-gzVnrw */
.ipkTNK{color:#666d71;display:block;font-size:1.6em;margin:50px 0 0 0;text-align:center;}
/* sc-component-id: sc-htoDjs */
.dIQAlg{color:#666d71;display:block;font-size:1.6em;margin:50px 0 0 0;text-align:center;margin:0;}
/* sc-component-id: sc-dnqmqq */
.gDybXa{color:#3498db;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: sc-iwsKbI */
.cdEpUV{margin:0 auto;max-width:650px;padding:0 50px 50px;text-align:center;}
/* sc-component-id: sc-gZMcBi */
.cLxazo{color:#65738c;font-size:16px;} .cLxazo a{color:#3498db;font-weight:700;-webkit-text-decoration:none;text-decoration:none;} .cLxazo a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .cLxazo h1{color:#3e465b;font-size:30px;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo h2{color:#3e465b;font-size:22px;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo h3{color:#3e465b;font-size:17px;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo h4{color:#3e465b;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo h5,.cLxazo h6{color:#3e465b;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo p{line-height:1.7;margin:15px 50px;} .cLxazo blockquote{border-left:5px solid #e0e6ed;line-height:1.7;margin:15px 50px 15px 75px;padding:10px 10px 10px 15px;} .cLxazo blockquote p{margin:0;} .cLxazo ul,.cLxazo ol{line-height:1.7;margin:15px 0;padding:0 50px 0 100px;} .cLxazo ul p,.cLxazo ol p,.cLxazo ul ul,.cLxazo ol ul,.cLxazo ul ol,.cLxazo ol ol{margin:0;} .cLxazo ul ul,.cLxazo ol ul,.cLxazo ul ol,.cLxazo ol ol{padding:0 0 0 30px;} .cLxazo img{margin:15px 0;}
/* sc-component-id: sc-gqjmRU */
.iMnMOA h1{color:#3e465b;font-size:35px;line-height:1.5;margin:0;padding:0 30px;text-align:center;} .iMnMOA p{color:#666d71;display:block;font-size:1.6em;margin:0;text-align:center;} .iMnMOA span{background:#9c9da3;display:block;margin:50px auto;height:1px;width:150px;}
/* sc-component-id: sc-VigVT */
.bGukrS{border:1px solid #bfc8d2;border-radius:25px;color:#3e465b;display:inline-block;font-size:10px;font-weight:700;margin:0 10px;padding:5px 15px;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase;} .bGukrS:hover{border-color:#000;}
/* sc-component-id: sc-jTzLTM */
.iQIAOc{background:#fff;border:1px solid #e0e6ed;box-shadow:0 1px 5px rgba(0,0,0,0.05);margin-bottom:30px;padding:75px 100px;} @media only screen and (max-width:870px){.iQIAOc{border-left:none;border-right:none;padding:75px 15px;}}
/* sc-component-id: sc-fjdhpX */
.hzOKsN{margin:-65px -90px 50px;} @media only screen and (max-width:870px){.hzOKsN{margin:-65px -5px 50px;}}
/* sc-component-id: sc-jzJRlG */
.eAaXEV{margin-top:50px;text-align:center;}
/* sc-component-id: sc-cSHVUG */
.iJKMsj{margin-top:50px;text-align:center;}
/* sc-component-id: sc-kAzzGY */
.fDOfVi{border:1px solid #bfc8d2;border-radius:15px;display:inline-block;margin:5px;padding:5px 15px;-webkit-text-decoration:none;text-decoration:none;} .fDOfVi svg{display:inline-block;height:20px;stroke:#6e849c;vertical-align:middle;width:20px;} .fDOfVi:hover{border-color:#3e465b;}
/* sc-component-id: sc-chPdSV */
.ukmsj{margin-top:50px;text-align:center;}
/* sc-component-id: sc-kgoBCf */
.dmFQlA{text-align:center;}
/* sc-component-id: sc-kGXeez */
.hGedeg{color:#3e465b;-webkit-text-decoration:none;text-decoration:none;} .hGedeg:hover{color:#3498db;}
/* sc-component-id: sc-kpOJdX */
.cpnbXC{color:#666d71;display:block;font-size:1.6em;margin:0;text-align:center;}
/* sc-component-id: sc-dxgOiQ */
.eNlzGc{color:#666d71;display:inline-block;font-size:14px;margin-top:50px;-webkit-text-decoration:none;text-decoration:none;} .eNlzGc:hover{color:#3498db;}</style><link rel="alternate" type="application/rss+xml" href="/blogs/rss.xml"/><link rel="icon" href="/blogs/favicon-32x32.png?v=76e25fd775d83433b36b3fb616df4494"/><link rel="manifest" href="/blogs/manifest.webmanifest"/><meta name="theme-color" content="#3498db"/><link rel="apple-touch-icon" sizes="48x48" href="/blogs/icons/icon-48x48.png?v=76e25fd775d83433b36b3fb616df4494"/><link rel="apple-touch-icon" sizes="72x72" href="/blogs/icons/icon-72x72.png?v=76e25fd775d83433b36b3fb616df4494"/><link rel="apple-touch-icon" sizes="96x96" href="/blogs/icons/icon-96x96.png?v=76e25fd775d83433b36b3fb616df4494"/><link rel="apple-touch-icon" sizes="144x144" href="/blogs/icons/icon-144x144.png?v=76e25fd775d83433b36b3fb616df4494"/><link rel="apple-touch-icon" sizes="192x192" href="/blogs/icons/icon-192x192.png?v=76e25fd775d83433b36b3fb616df4494"/><link rel="apple-touch-icon" sizes="256x256" href="/blogs/icons/icon-256x256.png?v=76e25fd775d83433b36b3fb616df4494"/><link rel="apple-touch-icon" sizes="384x384" href="/blogs/icons/icon-384x384.png?v=76e25fd775d83433b36b3fb616df4494"/><link rel="apple-touch-icon" sizes="512x512" href="/blogs/icons/icon-512x512.png?v=76e25fd775d83433b36b3fb616df4494"/><title data-react-helmet="true">Scraping images from instagram using puppeteer.js | Aditya Prajapati</title><meta data-react-helmet="true" name="description" content="Blog | @Syn3rman"/><link as="script" rel="preload" href="/blogs/webpack-runtime-414fa04a0290b7b033c0.js"/><link as="script" rel="preload" href="/blogs/framework-75da9754c2a76bbaf08a.js"/><link as="script" rel="preload" href="/blogs/app-5668c5e48e3b9023209a.js"/><link as="script" rel="preload" href="/blogs/styles-503b3015a8b38c118cb7.js"/><link as="script" rel="preload" href="/blogs/d8c6fceef6035ce68615adfef14ec1b550203772-2c9256892c71bd960fed.js"/><link as="script" rel="preload" href="/blogs/2ca085fac04eec258979fa96688fdd6e5c5ad72a-7ad8e7f70f64f58ec857.js"/><link as="script" rel="preload" href="/blogs/component---src-templates-blog-post-js-26cfbc9e5b390f0d4052.js"/><link as="fetch" rel="preload" href="/blogs/page-data/instacrape/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blogs/page-data/app-data.json" crossorigin="anonymous"/><link rel="shortcut icon" href="data:image/vnd.microsoft.icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAABILAAASCwAAAAAAAAAAAADbmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmjX/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uaNf/bmTP/2pUq/9uZM//bmjT/25o1/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25o1/9ybN//alSv/25o1/+KtXP/bmDL/2pYt/9qVK//cmzb/25o1/9uZM//bmTP/25kz/9uZM//bmTP/25o0/9qVK//YjyD/36RJ/+W1bf/25s//3J07/+CoUv/irFv/2JAh/9mUKP/bmTT/25kz/9uZM//bmTP/25k0/9qVLP/hqVT/8tq3///////pwob/8tq1/+OvYf/ksmb///////Xjyf/jsWX/2pYt/9uZM//bmTP/3Js2/9mTJ//uz6H///////DUq//eo0j/1owZ/+7Nnf/tzJr/140b/9ydPP/syJP///////ThxP/aliz/25o0/9uaNf/alSv/57t5//nv4P/25s//68eR/9ybOP/ltGv/896//9qWL//pwIP/9eLG//nw4//rx5H/2pYu/9uaNP/bmTP/25o0/9mTKP/blzH/57t4//rx5f/ty5n/3Js3//Xjyf/pwYX/+/Tq/+rDif/cnDn/2ZIl/9uZNP/bmTP/25kz/9uZM//bmjX/25kz/9iRJP/ZlCr/3Z9A/9mUKf/z38D/5bRs/9iRJf/YkST/25gx/9yaNv/bmTP/25kz/9uZM//bmTP/25kz/9uZM//cmjb/25o0/9uYMP/bmDH/3Z4//9ybOf/bmDH/3Js3/9uZNP/bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTT/25kz/9uYMP/bmDH/25k0/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTT/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><section class="sc-htpNat jcTQYx"><header class="sc-iwsKbI cdEpUV"><div class="sc-bxivhb jsMBhk"><a href="/blogs/"><img src="/blogs/static/main-8f11b9330e280635396375c7ea5cc4de.jpg" alt=""/></a></div><h1 class="sc-bZQynM iSYTTb"><a class="sc-dnqmqq gDybXa" href="/blogs/">Aditya Prajapati</a></h1><p class="sc-gzVnrw sc-htoDjs dIQAlg">@Syn3rman</p><div class="sc-ifAKCX cMSLWU"><a href="https://syn3rman.github.io/" target="_blank" rel="noopener" class="sc-EHOje jaYKME"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>Website</a><a href="https://twitter.com/AdityaP46042825" target="_blank" rel="noopener" class="sc-EHOje jaYKME"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>Twitter</a><a href="https://github.com/Syn3rman" target="_blank" rel="noopener" class="sc-EHOje jaYKME"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>Github</a><a href="https://linkedin.com/in/aditya-prajapati-129716101" target="_blank" rel="noopener" class="sc-EHOje jaYKME"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>LinkedIn</a></div></header></section><section class="sc-htpNat jcTQYx"><div class="sc-jTzLTM iQIAOc"><div class="sc-gqjmRU iMnMOA"><div class="sc-fjdhpX hzOKsN"><div class=" gatsby-image-outer-wrapper" style="position:relative"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:52.11267605633803%"></div><img alt="" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAME/9oADAMBAAIQAxAAAAHIuGmYH//EABcQAQADAAAAAAAAAAAAAAAAAAEAESD/2gAIAQEAAQUCiVn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAACAwAAAAAAAAAAAAAAAAAAEQEggf/aAAgBAQABPyEmRrK//9oADAMBAAIAAwAAABDz7//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAQEAAwAAAAAAAAAAAAAAAAERACBR/9oACAEBAAE/EDO6ClDr/9k=" style="position:absolute;top:0;left:0;transition:opacity 0.5s;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:0.25s"/><noscript><img src="/blogs/static/c6348903d9f5190255cace7363ef2931/809fc/puppeteer.jpg" srcset="/blogs/static/c6348903d9f5190255cace7363ef2931/d171b/puppeteer.jpg 213w,
/blogs/static/c6348903d9f5190255cace7363ef2931/d6b38/puppeteer.jpg 425w,
/blogs/static/c6348903d9f5190255cace7363ef2931/809fc/puppeteer.jpg 850w,
/blogs/static/c6348903d9f5190255cace7363ef2931/36838/puppeteer.jpg 1275w,
/blogs/static/c6348903d9f5190255cace7363ef2931/4f4f6/puppeteer.jpg 1700w,
/blogs/static/c6348903d9f5190255cace7363ef2931/76d80/puppeteer.jpg 1720w" alt="" sizes="(max-width: 850px) 100vw, 850px" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></noscript></div></div></div><h1>Scraping images from instagram using puppeteer.js</h1><p>January 13, 2020</p><span></span></div><article class="sc-gZMcBi cLxazo"><div><p>Get started with web scraping with puppeteer.js!</p>
<!-- end -->
<p>Since you have found this article, I am going to assume that you know what web scraping is and want to see puppeteer in action, either before deciding if you should use this library or using this as a follow along tutorial to how to use it. Keeping that in mind, in this article, I will walk you through the code to make a scraper to download the images from a user’s public profile.</p>
<p>I recently came across puppeteer.js, a node library that in their own terms:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">...provides a high-level API to control Chrome or Chromium over the DevTools Protocol. Puppeteer runs headless by default, but can be configured to run full (non-headless) Chrome or Chromium.</code></pre></div>
<p>It is a really powerful library and can be used for a variety of tasks, web scraping being one of them.
Since I prefer using Python for most of my tasks, I would’ve used selenium and bs4 for web scraping, but I was amazed by the functionalities that this js library provides.</p>
<h4>Expectations</h4>
<p>The primary goal for this project was to create a program that would take the user’s ig handle and the number of posts (count) you would like to download and download them to your computer for you.</p>
<h4>A brief word</h4>
<p>Since I am going to focus more on the scraping part rather than the express routing and other parts, I am going to skip over the directory structure and project initialization and focus more on the code functionality.</p>
<p>If you want to follow along, the code can be found at my <a href="https://github.com/Syn3rman/instaScrape/blob/master/instagram.js">GitHub profile</a>. I will give a brief overview of the project directory towards the end so you can skip to the end if you just wanna go through the code. So, let’s get into it!</p>
<h4>Starting off</h4>
<p>Before starting the project, I had the rough outline in mind as to create an express server and expose an API endpoint that would take the handle and count as parameters and return a JSON object having an array containing the image URLs.</p>
<p>Then, you could either save these URLs to a CSV file and write another program to download the images to the file system or create another server/script for this task (I’ll cover the reason later but one of the reason is that I found it easier to work with files in python than node’s fs).</p>
<p>We first import the library (puppeteer) and initialize it to create an instance of the browser and the page. We launch the browser in the headless state for testing so that we can see what is going on, but you can choose to run it in a headless state. We then create a new page and navigate to the profile page of the user. We specify the networkidle2 parameter to consider the navigation successful when there are no 2 requests for half a second. </p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">instagram.browser = await puppeteer.launch({headless: false});
instagram.page = await instagram.browser.newPage();
await instagram.page.goto(profilePage, {waitUntil: &#39;networkidle2&#39;});</code></pre></div>
<p>We will now go to a public profile on Instagram and try to find a unique way to select the posts so that we can extract the image URL. From the inspect element chrome dev tool, we can see that all images are inside the <code class="language-text">&lt;div&gt;</code> tag with class KL4Bh which itself is in a <code class="language-text">&lt;div&gt;</code> tag under a <code class="language-text">&lt;a&gt;</code> tag.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*bzQ57iRLkV9ndxQDqeIVCw.png"></p>
<p>Thus we can select that element using the <code class="language-text">document.querySelectorAll(selector)</code> method to select the elements. However, since we do not have access to the DOM, we need to make use of a puppeteer function - <code class="language-text">page.$$(selector)</code> that does it for us. You could also make use of the <code class="language-text">page.evaluate()</code> method which runs a piece of code in the DOM and returns the value to the program. The documentation does a fairly good job of explaining the methods available and can be found <a href="https://github.com/puppeteer/puppeteer/blob/master/docs/api.md#pageselector">here</a>.
After we have all the nodes, we will be able to iterate over it and do all kinds of things with it.</p>
<p>We select all the nodes that contain our image tags using the above-mentioned method, which returns an array of HTML nodes. Then we iterate over the entire array and extract the image URLs from them (by trial and error in the browser console), and store the images in an array of results. </p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>count <span class="token operator">&lt;</span> limit<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">const</span> nodes <span class="token operator">=</span> <span class="token keyword">await</span> instagram<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">$$</span><span class="token punctuation">(</span><span class="token string">"a>div>div.KL4Bh"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Selected nodes: '</span><span class="token punctuation">,</span> nodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res <span class="token operator">=</span> <span class="token keyword">await</span> instagram<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>src<span class="token punctuation">,</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
     count<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>However, there are multiple problems with this approach. First of all, we are incrementing count after pushing the URL to the results array, but we are not checking if the URL already in the array, which causes it to return us duplicate values in the array. Also, we need to figure out a way to scroll to the bottom of the page after we have selected and added the values that are currently in the scope (since Instagram uses lazy loading and there are only a specified number of images in the scope currently, and it will fetch images from the server if you have scrolled too far up or down). Thus, we need to add a check to add the values to the result only if it is not present in the array and implement the scrolling behavior. This is done as:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">while</span><span class="token punctuation">(</span>count <span class="token operator">&lt;</span> limit <span class="token operator">&amp;&amp;</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> nodes <span class="token operator">=</span> <span class="token keyword">await</span> instagram<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">$$</span><span class="token punctuation">(</span><span class="token string">"a>div>div.KL4Bh"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res <span class="token operator">=</span> <span class="token keyword">await</span> instagram<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>src<span class="token punctuation">,</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      count<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> instagram<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">scrollBy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> instagram<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>So, now that we have the array of URLs we can call it a day, <i>neh</i>? Hold it right there sparky! There is still one small detail that we haven’t taken care of. There is still the case where the user has only say, 5 posts, but we are trying to scrape the last 100 of his posts. In this case, our code will still try to scroll down even after it reaches the end and we will waste a lot of time here. Thus, we need to figure out a way to terminate the loop if there are no updates in the result. One way to do this is to store the length of the result array in another array, then compare the last 5 elements of that array and terminate the loop if they all are some, i.e., terminate the loop if no elements are added in 5 consecutive iterations (since the results are not appended if they already exist in the result array). The final code will look something like : </p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
count <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment">// Implement feature to stop after either getting {{ limit }} posts or if no new element is selected for say 10 iterations</span>
len_over_time <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>count<span class="token operator">&lt;</span>limit <span class="token operator">&amp;&amp;</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> nodes <span class="token operator">=</span> <span class="token keyword">await</span> instagram<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">$$</span><span class="token punctuation">(</span><span class="token string">"a>div>div.KL4Bh"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>nodes<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res <span class="token operator">=</span> <span class="token keyword">await</span> instagram<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>src<span class="token punctuation">,</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Add only if the img is not already present</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      count<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  len_over_time<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Check only when the length array > 5 (or always terminates in the first few iterations)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>len_over_time<span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// If all 5 elements are the same (length does not increase in 5 iterations), set will contain only 1 element</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>len_over_time<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>So, this is it (for most of the part anyways). You just need to create a server(http/express) and call this function from it. </p>
<p>After everything is done, you need to close the browser instance with:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now, for downloading the images, I created a flask server that takes the array of images as input and downloads them. To speed up the process, I made use of the multiprocessing module in python that divides the array into chunks and hands these chunks off to different processes. 
I tried using multithreading too but it (counter-intuitively) slowed down the code with an increasing number of threads (apparently due to the GIL implementation which slows it down since only one thread can acquire the gil at a time). I’m not going into the details for the efficiency and how the downloading was handled (mainly because it is in python and it is highly readable), but I will probably write about multithreading and multiprocessing in python soon.</p>
<p>Now, as promised earlier, here is the directory structure: </p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">./
|- app.js: Entry point to the code, routes to ./server
|- instagram.js: All the actual code lives here.
|-server/
    |- index.js: Routes requests to appropriate file
    |- public.js: Driver code for the functions in instagram.js
|-app.py: Flask server to download images</code></pre></div>
<p>The demo can be found in the README file of the <a href="https://github.com/Syn3rman/instaScrape">repository</a></p>
<p>Edit: I have also added a dockerfile for the project so you could just use:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">docker run --rm -it syn3rman/instascrape</code></pre></div></div></article><div class="sc-cSHVUG iJKMsj"><h2 class="sc-bdVaJa cBVFwB">Share This Post</h2><a href="https://www.facebook.com/sharer/sharer.php?u=" target="_blank" aria-label="Share on Facebook" rel="noopener" class="sc-kAzzGY fDOfVi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a><a href="https://twitter.com/intent/tweet?text=Scraping%20images%20from%20instagram%20using%20puppeteer.js&amp;url=" target="_blank" aria-label="Share on Twitter" rel="noopener" class="sc-kAzzGY fDOfVi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=&amp;title=Scraping%20images%20from%20instagram%20using%20puppeteer.js" target="_blank" aria-label="Share on LinkedIn" rel="noopener" class="sc-kAzzGY fDOfVi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="mailto:?subject=Scraping%20images%20from%20instagram%20using%20puppeteer.js&amp;body=" aria-label="Share by Email" rel="noopener" class="sc-kAzzGY fDOfVi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a></div></div><div class="sc-jzJRlG eAaXEV"><a rel="prev" class="sc-VigVT bGukrS" href="/blogs/inctf_final/">← <!-- -->Amrita Inctf 2019</a></div></section></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/instacrape/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5668c5e48e3b9023209a.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-e385def15e29b6ed02a7.js"],"component---src-pages-404-js":["/component---src-pages-404-js-49422260f07cb58c5bc0.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-26cfbc9e5b390f0d4052.js"],"component---src-templates-index-js":["/component---src-templates-index-js-d77ce10ec025cf87f0cb.js"]};/*]]>*/</script><script src="/blogs/component---src-templates-blog-post-js-26cfbc9e5b390f0d4052.js" async=""></script><script src="/blogs/2ca085fac04eec258979fa96688fdd6e5c5ad72a-7ad8e7f70f64f58ec857.js" async=""></script><script src="/blogs/d8c6fceef6035ce68615adfef14ec1b550203772-2c9256892c71bd960fed.js" async=""></script><script src="/blogs/styles-503b3015a8b38c118cb7.js" async=""></script><script src="/blogs/app-5668c5e48e3b9023209a.js" async=""></script><script src="/blogs/framework-75da9754c2a76bbaf08a.js" async=""></script><script src="/blogs/webpack-runtime-414fa04a0290b7b033c0.js" async=""></script></body></html>